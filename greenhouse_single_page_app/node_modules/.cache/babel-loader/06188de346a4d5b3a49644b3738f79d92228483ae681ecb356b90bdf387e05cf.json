{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      loginForm: {\n        email: '',\n        password: ''\n      },\n      errorMessage: '',\n      loading: false\n    };\n  },\n  methods: {\n    async handleLogin() {\n      this.loading = true;\n      this.errorMessage = '';\n      if (!this.loginForm.email || !this.loginForm.password) {\n        this.errorMessage = 'Please enter both email and password.';\n        this.loading = false;\n        return;\n      }\n      try {\n        // Make the API call to your Flask backend\n        const response = await axios.post('http://127.0.0.1:5000/login', {\n          //  Flask backend\n          email: this.loginForm.email,\n          password: this.loginForm.password\n        });\n\n        // Handle successful login\n        if (response.status === 200 && response.data.token) {\n          // Store the token (securely - localStorage is NOT the best, but simple for this example)\n          localStorage.setItem('token', response.data.token);\n          // Redirect to a protected page (e.g., dashboard)\n          this.$router.push('/dashboard'); //  adjust this to your actual route\n        } else {\n          this.errorMessage = 'Login failed: Invalid response from server.';\n        }\n      } catch (error) {\n        // Handle login errors (e.g., invalid credentials, server error)\n        if (error.response) {\n          this.errorMessage = `Login failed: ${error.response.data.message || 'Server error'}`;\n        } else {\n          this.errorMessage = 'Login failed: Network error. Please try again.';\n        }\n        console.error(\"Login error:\", error); // Log the error for debugging\n      } finally {\n        this.loading = false;\n      }\n    }\n  },\n  created() {\n    this.$router = useRouter();\n  }\n};","map":{"version":3,"names":["useRouter","axios","data","loginForm","email","password","errorMessage","loading","methods","handleLogin","response","post","status","token","localStorage","setItem","$router","push","error","message","console","created"],"sources":["/home/alex/dev/GreenHouse/greenhouse_single_page_app/src/pages/authenticate/TheLogin.vue"],"sourcesContent":["<template>\n    <div class=\"login-container\">\n        <div class=\"login-form\">\n            <h2>Login</h2>\n            <div v-if=\"errorMessage\" class=\"error-message\">{{ errorMessage }}</div>\n            <form @submit.prevent=\"handleLogin\">\n                <div class=\"form-group\">\n                    <label for=\"email\">Email:</label>\n                    <input type=\"email\" id=\"email\" v-model=\"loginForm.email\" required />\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"password\">Password:</label>\n                    <input type=\"password\" id=\"password\" v-model=\"loginForm.password\" required />\n                </div>\n                <button type=\"submit\" :disabled=\"loading\">\n                    <span v-if=\"loading\">Loading...</span>\n                    <span v-else>Login</span>\n                </button>\n            </form>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\n\nexport default {\n    data() {\n        return {\n            loginForm: {\n                email: '',\n                password: '',\n            },\n            errorMessage: '',\n            loading: false,\n        };\n    },\n    methods: {\n        async handleLogin() {\n            this.loading = true;\n            this.errorMessage = '';\n\n            if (!this.loginForm.email || !this.loginForm.password) {\n                this.errorMessage = 'Please enter both email and password.';\n                this.loading = false;\n                return;\n            }\n\n            try {\n                // Make the API call to your Flask backend\n                const response = await axios.post('http://127.0.0.1:5000/login', {  //  Flask backend\n                    email: this.loginForm.email,\n                    password: this.loginForm.password,\n                });\n\n                // Handle successful login\n                if (response.status === 200 && response.data.token) {\n                    // Store the token (securely - localStorage is NOT the best, but simple for this example)\n                    localStorage.setItem('token', response.data.token);\n                    // Redirect to a protected page (e.g., dashboard)\n                    this.$router.push('/dashboard'); //  adjust this to your actual route\n                } else {\n                    this.errorMessage = 'Login failed: Invalid response from server.';\n                }\n\n            } catch (error) {\n                // Handle login errors (e.g., invalid credentials, server error)\n                if (error.response) {\n                    this.errorMessage = `Login failed: ${error.response.data.message || 'Server error'}`;\n                } else {\n                    this.errorMessage = 'Login failed: Network error. Please try again.';\n                }\n                console.error(\"Login error:\", error); // Log the error for debugging\n            } finally {\n                this.loading = false;\n            }\n        },\n    },\n    created() {\n      this.$router = useRouter();\n    }\n};\n</script>\n\n<style scoped>\n.login-container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100vh;\n    background-color: #f0f0f0;\n}\n\n.login-form {\n    width: 300px;\n    padding: 20px;\n    background-color: #fff;\n    border-radius: 5px;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.form-group {\n    margin-bottom: 15px;\n}\n\nlabel {\n    display: block;\n    margin-bottom: 5px;\n}\n\ninput {\n    width: 100%;\n    padding: 8px;\n    border: 1px solid #ddd;\n    border-radius: 3px;\n}\n\nbutton {\n    width: 100%;\n    padding: 10px;\n    background-color: #007bff;\n    color: #fff;\n    border: none;\n    border-radius: 3px;\n    cursor: pointer;\n    transition: background-color 0.3s ease;\n}\n\nbutton:hover {\n    background-color: #0056b3;\n}\n\nbutton:disabled {\n    background-color: #ccc;\n    cursor: not-allowed;\n}\n\n.error-message {\n    color: red;\n    margin-bottom: 10px;\n}\n</style>"],"mappings":";AAwBA,SAASA,SAAQ,QAAS,YAAY;AACtC,OAAOC,KAAI,MAAO,OAAO;AAEzB,eAAe;EACXC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,SAAS,EAAE;QACPC,KAAK,EAAE,EAAE;QACTC,QAAQ,EAAE;MACd,CAAC;MACDC,YAAY,EAAE,EAAE;MAChBC,OAAO,EAAE;IACb,CAAC;EACL,CAAC;EACDC,OAAO,EAAE;IACL,MAAMC,WAAWA,CAAA,EAAG;MAChB,IAAI,CAACF,OAAM,GAAI,IAAI;MACnB,IAAI,CAACD,YAAW,GAAI,EAAE;MAEtB,IAAI,CAAC,IAAI,CAACH,SAAS,CAACC,KAAI,IAAK,CAAC,IAAI,CAACD,SAAS,CAACE,QAAQ,EAAE;QACnD,IAAI,CAACC,YAAW,GAAI,uCAAuC;QAC3D,IAAI,CAACC,OAAM,GAAI,KAAK;QACpB;MACJ;MAEA,IAAI;QACA;QACA,MAAMG,QAAO,GAAI,MAAMT,KAAK,CAACU,IAAI,CAAC,6BAA6B,EAAE;UAAG;UAChEP,KAAK,EAAE,IAAI,CAACD,SAAS,CAACC,KAAK;UAC3BC,QAAQ,EAAE,IAAI,CAACF,SAAS,CAACE;QAC7B,CAAC,CAAC;;QAEF;QACA,IAAIK,QAAQ,CAACE,MAAK,KAAM,GAAE,IAAKF,QAAQ,CAACR,IAAI,CAACW,KAAK,EAAE;UAChD;UACAC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEL,QAAQ,CAACR,IAAI,CAACW,KAAK,CAAC;UAClD;UACA,IAAI,CAACG,OAAO,CAACC,IAAI,CAAC,YAAY,CAAC,EAAE;QACrC,OAAO;UACH,IAAI,CAACX,YAAW,GAAI,6CAA6C;QACrE;MAEJ,EAAE,OAAOY,KAAK,EAAE;QACZ;QACA,IAAIA,KAAK,CAACR,QAAQ,EAAE;UAChB,IAAI,CAACJ,YAAW,GAAI,iBAAiBY,KAAK,CAACR,QAAQ,CAACR,IAAI,CAACiB,OAAM,IAAK,cAAc,EAAE;QACxF,OAAO;UACH,IAAI,CAACb,YAAW,GAAI,gDAAgD;QACxE;QACAc,OAAO,CAACF,KAAK,CAAC,cAAc,EAAEA,KAAK,CAAC,EAAE;MAC1C,UAAU;QACN,IAAI,CAACX,OAAM,GAAI,KAAK;MACxB;IACJ;EACJ,CAAC;EACDc,OAAOA,CAAA,EAAG;IACR,IAAI,CAACL,OAAM,GAAIhB,SAAS,CAAC,CAAC;EAC5B;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}